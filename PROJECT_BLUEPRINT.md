# 몰트로그 프로젝트 기술 청사진 (Technical Blueprint)

**버전**: 1.0
**작성일**: 2025년 10월 14일
**프로젝트**: 몰트로그 - 위스키 기록 및 커뮤니티 플랫폼

---

## 1. 시스템 아키텍처 분석

### 1.1 기술 스택

#### Frontend
- **Framework**: Next.js 15.5.4 (React 19.1.0 기반)
- **스타일링**: Tailwind CSS 4.x
- **UI 라이브러리**:
  - Framer Motion (12.23.24) - 애니메이션
  - React Hot Toast (2.6.0) - 알림 시스템
- **폰트**: Google Fonts (Geist, Geist Mono, Jolly Lodger)
- **상태 관리**: React Context API (AuthContext)

#### Backend
- **BaaS**: Supabase (PostgreSQL 기반)
- **API**: Next.js API Routes
- **인증**: Supabase Auth (이메일/비밀번호, 카카오 OAuth)
- **파일 저장소**: Supabase Storage

#### Deployment
- **호스팅**: Vercel
- **데이터베이스**: Supabase (PostgreSQL)
- **CDN**: Vercel Edge Network
- **도메인**: Vercel 기본 도메인

### 1.2 데이터 흐름

```
사용자 브라우저
    ↓
Vercel Edge Network (CDN)
    ↓
Next.js 서버 컴포넌트 (SSR/SSG)
    ↓
Supabase PostgreSQL Database
    ↓
클라이언트 컴포넌트 (CSR)
    ↓
사용자 화면 렌더링
```

**주요 흐름**:
1. 사용자가 페이지 접근
2. Vercel에서 Next.js 서버 컴포넌트 실행
3. 서버에서 Supabase로 초기 데이터 요청
4. 서버 사이드 렌더링으로 초기 HTML 생성
5. 클라이언트에서 하이드레이션 및 추가 인터랙션 처리

### 1.3 핵심 디자인 패턴

#### 서버/클라이언트 컴포넌트 분리 패턴
- **서버 컴포넌트**: 초기 데이터 로드 및 SEO 최적화
  - `/app/page.tsx` - 홈페이지 위스키 데이터 SSR
  - `/app/community/page.tsx` - 커뮤니티 게시글 SSR
  - `/app/whisky/[id]/page.tsx` - 위스키 상세 정보 SSR

- **클라이언트 컴포넌트**: 사용자 인터랙션 및 동적 기능
  - `HomePageClient.tsx` - 검색, 좋아요, 페이지네이션
  - `CommunityClient.tsx` - 게시글 CRUD, 검색
  - `WhiskyDetailClient.tsx` - 리뷰 작성, 좋아요

---

## 2. 현재 구현된 기능 명세

### 2.1 사용자 인증 시스템
- **회원가입/로그인**: 이메일/비밀번호 방식
- **소셜 로그인**: 카카오 OAuth 연동
- **프로필 관리**: 닉네임, 아바타 이미지 업로드
- **세션 관리**: Supabase Auth를 통한 자동 세션 처리
- **보안**: Row Level Security (RLS) 정책 적용

### 2.2 위스키 정보 시스템
- **위스키 목록**: 검색, 필터링, 페이지네이션
- **상세 정보**: 증류소, 지역, 도수, 캐스크, 가격 정보
- **이미지 관리**: Supabase Storage를 통한 이미지 업로드
- **좋아요 시스템**: 사용자별 위스키 찜 기능
- **리뷰 시스템**: 5점 평점 및 텍스트 리뷰

### 2.3 커뮤니티 시스템
- **게시글 CRUD**: 작성, 조회, 수정, 삭제
- **이미지 업로드**: 게시글 내 이미지 첨부
- **댓글 시스템**: 게시글별 댓글 작성/관리
- **좋아요 기능**: 게시글 좋아요 및 카운트
- **검색 기능**: 제목/내용 기반 게시글 검색
- **페이지네이션**: 4개씩 페이지 단위 로드

### 2.4 관리자 시스템
- **이미지 관리**: 위스키 이미지 일괄 업데이트
- **데이터 마이그레이션**: localStorage에서 Supabase로 데이터 이전

---

## 3. 코드베이스 진단 및 개선 제안

### 3.1 기술 부채 (Technical Debt)

#### 높은 우선순위
1. **타입 안전성 부족**
   - `next.config.ts`에서 TypeScript 빌드 에러 무시 설정
   - 일부 컴포넌트에서 `any` 타입 사용
   - **개선안**: 점진적 타입 정의 및 strict 모드 활성화

2. **에러 처리 일관성 부족**
   - 일부 함수에서 에러 처리 누락
   - console.log가 프로덕션 코드에 남아있음 (28개 파일에서 318회 발견)
   - **개선안**: 전역 에러 바운더리 및 로깅 시스템 구축

3. **디버그 코드 제거 필요**
   - `lib/supabase.ts`에 디버그 로깅 코드 잔존
   - **개선안**: 환경별 로깅 레벨 설정

#### 중간 우선순위
4. **컴포넌트 크기 문제**
   - `HomePageClient.tsx` (32,651 bytes), `WhiskyDetailClient.tsx` (51,273 bytes)
   - **개선안**: 기능별 하위 컴포넌트로 분리

5. **데이터베이스 스키마 불일치**
   - `supabase-migration.sql`과 `supabase-tables.sql` 중복
   - **개선안**: 단일 마이그레이션 파일로 통합

### 3.2 성능 최적화 포인트

#### 즉시 개선 필요
1. **이미지 최적화**
   - `next.config.ts`에서 `unoptimized: true` 설정
   - **개선안**: Next.js Image 컴포넌트 활용 및 WebP 포맷 적용

2. **번들 크기 최적화**
   - Framer Motion 전체 라이브러리 로드
   - **개선안**: 필요한 모듈만 import하는 tree-shaking 적용

3. **데이터 로딩 최적화**
   - 홈페이지에서 초기 20개만 로드하지만, 전체 데이터 로드 시 최적화 부족
   - **개선안**: Virtual scrolling 또는 Infinite scroll 구현

#### 점진적 개선 필요
4. **캐싱 전략**
   - API 응답 캐싱 부족
   - **개선안**: React Query/SWR 도입 또는 Supabase 캐싱 활용

5. **코드 스플리팅**
   - 페이지별 코드 분할 미흡
   - **개선안**: Dynamic import 및 Lazy loading 적용

### 3.3 사용자 경험(UX) 개선점

#### 높은 우선순위
1. **알림 시스템 개선**
   - 일부 파일에서 여전히 `alert()` 사용 (4개 파일)
   - **구현 완료**: React Hot Toast 도입
   - **추가 개선**: 모든 alert를 toast로 전환

2. **로딩 상태 개선**
   - 일부 API 호출에서 로딩 인디케이터 누락
   - **개선안**: Skeleton UI 확대 적용

3. **에러 상태 처리**
   - 네트워크 에러 시 사용자 친화적 메시지 부족
   - **개선안**: 에러 상태별 맞춤형 UI 제공

#### 중간 우선순위
4. **반응형 디자인**
   - 모바일 최적화 상태 검증 필요
   - **개선안**: 다양한 디바이스에서 테스트 및 최적화

5. **접근성 개선**
   - ARIA 레이블 및 키보드 네비게이션 부족
   - **개선안**: WCAG 2.1 가이드라인 준수

---

## 4. 최종 목표 달성을 위한 로드맵

### 목표: 안정적인 웹 기반 모바일 앱 개발

### Phase 1: 웹 플랫폼 안정화 (1-2개월)
**우선순위: 최고**

1. **API 안정화**
   - TypeScript strict 모드 활성화
   - 전역 에러 처리 시스템 구축
   - API 응답 표준화 및 검증 로직 추가

2. **성능 최적화**
   - 이미지 최적화 (Next.js Image 컴포넌트 적용)
   - 번들 크기 최적화 (tree-shaking, 코드 스플리팅)
   - 데이터베이스 쿼리 최적화

3. **사용자 경험 완성**
   - 모든 alert를 toast로 전환
   - 로딩 및 에러 상태 UI 통일
   - 반응형 디자인 검증 및 개선

### Phase 2: 모바일 최적화 준비 (2-3개월)
**우선순위: 높음**

4. **PWA 구현**
   - Service Worker 추가
   - 오프라인 기능 지원
   - 앱 아이콘 및 스플래시 스크린

5. **모바일 UX 최적화**
   - 터치 인터페이스 최적화
   - 모바일 네비게이션 개선
   - 성능 모니터링 도구 도입

6. **API 확장**
   - 모바일 앱을 위한 GraphQL 또는 최적화된 REST API
   - 푸시 알림 시스템 준비

### Phase 3: 네이티브 앱 개발 (3-4개월)
**우선순위: 중간**

7. **하이브리드 앱 개발**
   - React Native 또는 Expo 기반 앱 개발
   - 기존 웹 컴포넌트 재활용
   - 네이티브 기능 통합 (카메라, 위치, 알림)

8. **앱스토어 준비**
   - 앱 심사 가이드라인 준수
   - 앱 아이콘, 스크린샷, 설명 준비
   - 베타 테스트 프로그램 운영

### Phase 4: 고도화 기능 추가 (4-6개월)
**우선순위: 낮음**

9. **고급 기능 개발**
   - AI 기반 위스키 추천 시스템
   - 소셜 기능 확장 (팔로우, 피드)
   - 위스키 바코드 스캔 기능

10. **운영 최적화**
    - 사용자 분석 도구 도입
    - A/B 테스트 프레임워크
    - 자동화된 배포 파이프라인

---

## 5. 결론

몰트로그 프로젝트는 현재 **견고한 기술적 기반**을 갖추고 있으며, 주요 기능들이 안정적으로 구현되어 있습니다. Next.js 15와 Supabase의 조합은 빠른 개발과 확장성을 동시에 제공하며, 모바일 앱으로의 확장에도 유리한 구조입니다.

### 핵심 강점
- **모던 기술 스택**: Next.js 15, React 19, Supabase
- **확장 가능한 아키텍처**: 서버/클라이언트 컴포넌트 분리
- **포괄적인 기능**: 인증, 커뮤니티, 위스키 관리 전 영역 커버
- **안정적인 배포**: Vercel 통합 배포

### 개선 필요 영역
- **코드 품질**: TypeScript strict 모드, 에러 처리
- **성능**: 이미지 최적화, 번들 크기
- **사용자 경험**: 일관된 UI/UX, 접근성

제시된 로드맵을 따라 단계적으로 개선해 나간다면, **6개월 내에 안정적인 모바일 앱 출시**가 가능할 것으로 판단됩니다.

---
*문서 작성: 2025년 10월 14일*
*다음 리뷰 예정: 2025년 11월 14일*